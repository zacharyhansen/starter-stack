{"version":3,"sources":["../../src/auth/auth.controller.ts"],"sourcesContent":["import { Controller, Get, Query, Req, Res } from '@nestjs/common';\nimport { type Request, type Response } from 'express';\nimport { type User } from '@repo/postgres-types';\n\nimport { Database } from '../database/database';\n\nimport { Public } from './decorators/public.decorator';\n\n@Controller('auth')\nexport class AuthController {\n  constructor(private readonly database: Database) {}\n\n  @Get('test-public')\n  @Public()\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  testPublic(@Query() query: any): Promise<User[]> {\n    return this.database\n      .withSchema(query.schema)\n      .selectFrom('user')\n      .selectAll()\n      .execute();\n  }\n\n  @Get('test-private')\n  testPrivate(@Req() request: Request, @Res() response: Response) {\n    return response.send('OK');\n  }\n}\n"],"names":["AuthController","constructor","database","testPublic","query","withSchema","schema","selectFrom","selectAll","execute","testPrivate","request","response","send"],"mappings":";;;;+BASaA;;;eAAAA;;;wBAToC;0BAIxB;iCAEF;;;;;;;;;;;;;;;AAGhB,IAAA,AAAMA,iBAAN,MAAMA;IACXC,YAAY,AAAiBC,QAAkB,CAAE;aAApBA,WAAAA;IAAqB;IAIlD,8DAA8D;IAC9DC,WAAW,AAASC,KAAU,EAAmB;QAC/C,OAAO,IAAI,CAACF,QAAQ,CACjBG,UAAU,CAACD,MAAME,MAAM,EACvBC,UAAU,CAAC,QACXC,SAAS,GACTC,OAAO;IACZ;IAGAC,YAAY,AAAOC,OAAgB,EAAE,AAAOC,QAAkB,EAAE;QAC9D,OAAOA,SAASC,IAAI,CAAC;IACvB;AACF"}